<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Lunch UX</title>
        <link href="style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
        <script src="helpers.js"></script>
        <script src="build/templates.js"></script>
        <script src="models.js"></script>
        <script src="modals.js"></script>
        <script src="app.js"></script>
        
    </head>

    <body>
      <div class="outer-container">
        <header>
            <div class="nav">
              <div><a class='faq' href="#faq"><span class='question-mark'></span>Help</a></div>
              <h1><a href="/">LunchUX</a></h1>
              <div id="signout"></div>
            </div>
            <ul class="subnav">
              <li><a href="#">Welcome</a></li>
              <li><a href="#kids">Students &amp; Kids</a></li>
              <li><a href="#other-help">Assistance</a></li>
              <li><a href="#adults">Adults</a></li>
              <li><a href="#income">Income</a></li>
              <li><a href="#review">Verify</a></li>
            </ul>
            <div class="existing-session hide">
              Welcome back!
            </div>
        </header>

        <ul class='subnav mobile-subnav'>
          <li class='prog-round done'>
            <a href="#"><span class='prog-label'>Welcome</span></a>
          </li>
          <span class='prog-bar'></span>
          <li class='prog-round'>
            <a href="#kids"><span class='prog-label'>Students &amp; Kids</span></a>
          </li>
          <span class='prog-bar'></span>
            <li class='prog-round'>
              <a href="#other-help"><span class='prog-label'>Assistance</span></a>
            </li>
          <span class='prog-bar'></span>
          <li class='prog-round'>
            <a href="#adults"><span class='prog-label'>Adults</span></a>
          </li>

          <span class='prog-bar'></span>
          <li class='prog-round'>
            <a href="#income"><span class='prog-label'>Income</span></a>
          </li>
          <span class='prog-bar'></span>
          <li class='prog-round'>
            <a href="#review"><span class='prog-label'>Verify</span></a>
          </li>
        </ul>

        <main>
          <div id="app"></div>
          <div id="debug">
            <pre style="display: none"></pre>
            <i style="font-size: smaller">Show debug</i>
          </div>
        </main>

        <footer>
        </footer>

        <script type="text/template" id="person-template">
          <li class="person valid">
            <div class="person-name-bar">
              <div class="person-name"><%= person.name %></div>
              <div class="actions">Edit</div>
            </div>
          </li>
        </script>

        <script type="text/template" id="kid-person-form-template">
          <% var name = person.name %>
          <form class="details-form" style="display: none">
            <div>
              <label>
                Name (ex: Student U. Eighteen)<br>
                <input name="name" type="text" placeholder="Name" required value="<%- name %>">
              </label>
            </div>
            <div class="normal-label">
              <p><b>Is <%- name %> a student?</b></p>
              <label><input name="is-student" type="radio" value="no" required <%= tribool(person.isStudent, false) %>> No</label>
              <label><input name="is-student" type="radio" value="yes" <%= tribool(person.isStudent, true) %>> Yes</label>
            </div>
            <div class="normal-label">
              <p><b>Is <%- name %> a foster child?</b></p>
              <label><input name="is-foster-child" type="radio" value="no" required <%= tribool(person.isFosterChild, false) %>> No</label>
              <label><input name="is-foster-child" type="radio" value="yes" <%= tribool(person.isFosterChild, true) %>> Yes</label>
            </div>
            <div class="normal-label">
              <p><b>Is <%- name %> considered
                <div class='tooltip-item'>homeless <span class="question-mark-small"></span>
                  <div class='tooltip'>A child is homeless if they've been identified by the Local Education Agency (LEA) homeless liaison, or by an official of a homeless shelter, as lacking a fixed, regular, and adequate nighttime residence.</div>
                </div>, a
                <div class='tooltip-item'>runaway <span class="question-mark-small"></span>
                  <div class='tooltip'>A child is identified as a runaway under the Runaway and Homeless Youth Act, by the local educational liaison, or another person in accordance with guidance issued by FNS.</div>
                </div>, a
                <div class='tooltip-item'>migrant <span class="question-mark-small"></span>
                  <div class='tooltip'>A child is a migrant if they've been identified as a migrant by the State or local Migrant Education Program coordinator, the local educational liaison, or another individual identified by the Food and Nutrition Service (FNS).</div>
                </div>, or is <%- name %> enrolled in the
                <div class='tooltip-item'>Head Start <span class="question-mark-small"></span>
                  <div class='tooltip'>Head Start is a federal- or state-funded pre-kindergarten program. To qualify, the state-funded program must have eligibility criteria that is identical or more stringent than the federal Head Start program.</div>
                </div> program?</b>
              </p>

              <label><input name="is-homeless" type="radio" value="no" required <%= tribool(person.isHomeless, false) %>> No</label>
              <label><input name="is-homeless" type="radio" value="yes" <%= tribool(person.isHomeless, true) %>> Yes</label>
            </div>
            <p><b>We are required to ask for information about your children's race and ethnicity.</b><br>This information is important and helps to make sure we are fully serving our community. Responding to this section is optional and does not affect your childrenâ€™s eligibility for free or reduced price meals.</p>
            <p><b>Ethnicity</b></p>
            <div class="normal-label">
              <label><input name="is-hispanic" type="radio" value="yes" required <%= tribool(person.isHispanic, true) %>> Hispanic or Latino</label>
              <label><input name="is-hispanic" type="radio" value="no" <%= tribool(person.isHispanic, false) %>> Not Hispanic nor Latino</label>
              <label><input name="is-hispanic" type="radio" value="declined" <%= tribool(person.isHispanicDeclined, true) %>> Decline to answer</label>
            </div>
            <p>
              <b>Race</b>
            </p>
            <div class="normal-label">
              <% races.map(function(r) { %>
              <label>
                <input type="checkbox" name="race" value="<%= r.value %>" <%= (person.races.indexOf(r.value) >= 0 ? "checked" : "") %>> <%= r.label %>
              </label>
              <% }) %>
            </div>
            <p>Thank you! In just a bit, we'll ask you about <%= name %>'s income.</p>
            <div class="button-group justify">
              <button class="button save">Save</button>
              <a class="button remove" href="#">Remove</a>
            </div>
          </form>
        </script>

        <script type="text/template" id="adult-person-form-template">
          <div class="details-form" style="display: none">
            <div>
              <label>
                Name (ex: Kid U. Eighteen)<br>
                <input name="name" type="text" placeholder="Name" value="<%- person.name %>">
              </label>
            </div>
            <div class="button-group justify">
              <button class="button save">Save</button>
              <a class="delete" href="#">Remove</a>
            </div>
            </div>
        </script>

        <script type="text/template" id="income-person-form-template">
          <form class="details-form" style="display: none">
            <p><b>How much does <%= person.name %> contribute in income, and how often? If they don't have any earnings, enter '0'.</b></p>
            <% incomeTypes.map(function(type) { %>
            <div>
              <label>
                From <%= type.label %><br>
                <input name="income-<%= type.value %>-amount" type="number" placeholder="$" value="<%= incomeAmount(person, type.value) %>" required>
              </label>
              <select name="income-<%= type.value %>-freq">
                <% frequencies.map(function(freq) { %>
                <option <%= (incomeFrequency(person, type.value) === freq ? "selected" : "") %>><%= freq %></option>
                <% }) %>
              </select>
            </div>
            <% }) %>
            <div>
              <button class="button save">Save</button>
            </div>
          </form>
        </script>

        <script type="text/template" id="review-description-template">
          <p>
            There are <b><%= pluralize(numKids, "youth") %></b> and
            <b><%= pluralize(numAdults, "adult") %></b> in your household, for a
            total of
            <b><%= pluralize(numPeople, "person", "people") %></b>.
            Do you need to add anyone else?
          </p>
        </script>

        <script type="text/template" id="kid-summary-template">
          <li><%= person.name %> <%= person.isStudent ? "is" : "is not" %> a student.</li>
          <li><%= person.name %> <%= person.isFosterChild ? "is" : "is not" %> a foster child.</li>
          <li><%= person.name %> <%= person.isHomeless ? "is" : "is not" %> considered homeless, a migrant, a runaway, or enrolled in the Head Start program.</li>
          <li><%= person.name %> has <%= incomeText(person) %>.</li>
        </script>

        <script type="text/template" id="adult-summary-template">
          <li><%= person.name %> is an adult member of your household.</li>
          <li><%= person.name %> has <%= incomeText(person) %>.</li>
        </script>

        <script type="text/template" id="person-summary-template">
          <% people.forEach(function(person) { %>
          <li class="person valid">
            <div class="person-name-bar">
              <div class="person-name"><%= person.name %></div>
              <div class="actions"><a href="#<%= person.ageClass === LunchUX.AgeClass.child ? "kids" : "adults" %>">Edit these details</a></div>
            </div>
            <ul class="summary">
              <%= person.ageClass === LunchUX.AgeClass.child ? kidSummary(person) : adultSummary(person) %>
            </ul>
          </li>
          <% }) %>
        </script>
      </div>
    </body>

</html>
